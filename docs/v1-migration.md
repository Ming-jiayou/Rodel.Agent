# V1 数据迁移

小幻助理在 2024 年年初推出了 V1 版本，原仓库在 [Richasy/RichasyAssisstant](https://github.com/Richasy/RichasyAssistant)。

彼时 AI 服务正在井喷，行业内还没有形成相对统一的标准。

在那时制作的小幻助理由于考虑不周，数据结构的设计存在较大问题，已经很难适应现在的 AI 服务，所以我重构了整个应用，迁移到了 V2。

这导致旧版本和新版本的数据并不互通。

小幻助理 V2 版本内置了一个迁移工具，可以帮助 V1 版本的用户迁移到 V2。

旧版本用户在下载新版本后，可以打开旧版本创建的工作目录。

如果目录内存在 `_secret_.db` 文件，小幻助理会开始执行迁移，主要迁移以下内容：

1. 密钥数据
2. 聊天记录
3. 生成的图片

以下数据因为功能原因不会迁移：

1. 本地模型配置（被 Ollama 取代）
2. 助理（被会话预设和新版本助理取代）
3. 翻译记录

---

在迁移完成后，小幻助理会重启 APP，重启后，小幻助理会将 V1 的数据内容打包成 `v1_backup.zip`，然后将工作目录改造成 V2 的形状。